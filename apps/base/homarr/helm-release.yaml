apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: homarr
  namespace: homarr
spec:
  interval: 5m
  chart:
    spec:
      chart: homarr
      version: "0.1.x"  # Use latest 0.1.x version
      sourceRef:
        kind: HelmRepository
        name: homarr-labs
        namespace: homarr
  values:
    image:
      tag: "latest"  # Use latest stable release
    
    env:
      TZ: "America/Chicago"
      AUTH_PROVIDERS: "credentials"
    
    service:
      enabled: true
      type: ClusterIP
      ports:
        app:
          port: 7575
          targetPort: http
          protocol: TCP
    
    persistence:
      homarrDatabase:
        enabled: true
        storageClassName: "local-path"
        accessMode: "ReadWriteOnce"
        size: "1Gi"
        mountPath: "/appdata/db"
      homarrImages:
        enabled: true
        storageClassName: "local-path"
        accessMode: "ReadWriteOnce"
        size: "1Gi"
        mountPath: "/images"
    
    ingress:
      enabled: false  # Using Traefik IngressRoute instead
    
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
